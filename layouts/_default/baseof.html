<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{{ .Title }}</title>
  <meta name="description" content="{{ site.Params.description }}">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">

  <style>
    :root{ --bg:#f7f5f2; --panel:#fff; --text:#23262b; --muted:#6b7280; --brand:#2f6bff; --border:#e6e2dc; --radius:14px; --maxw:1100px; --shadow:0 8px 20px rgba(0,0,0,.05); }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0}
    body{
      background:
        radial-gradient(900px 600px at 10% -10%, rgba(47,107,255,.065), transparent 50%),
        radial-gradient(900px 600px at 100% 0%, rgba(0,184,148,.06), transparent 50%),
        var(--bg);
      color:var(--text);
      font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      line-height:1.6;
    }
    a{color:inherit;text-decoration:none}
    img{max-width:100%;display:block}
    .container{max-width:var(--maxw);margin:0 auto;padding:0 20px}

    /* Header */
    header{
      position:sticky; top:0; z-index:50;
      background:rgba(255,255,255,.9);
      backdrop-filter:saturate(180%) blur(8px);
      border-bottom:1px solid var(--border);
    }
    .nav{display:flex;align-items:center;justify-content:space-between;height:64px}
    .brand{font-weight:800;letter-spacing:.2px}
    .brand strong{font-family:"Playfair Display",serif;font-weight:700;font-size:20px}

    /* Desktop nav only */
    .nav-desktop ul{display:flex;gap:20px;list-style:none;margin:0;padding:0}
    nav a{color:var(--muted);font-weight:600}
    nav a:hover{color:var(--text)}

    .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border:1px solid var(--border);border-radius:999px;background:var(--panel);box-shadow:var(--shadow)}
    .btn.primary{border-color:transparent;background:linear-gradient(135deg,var(--brand),#7aa3ff);color:#fff;font-weight:800;box-shadow:0 8px 18px rgba(47,107,255,.25)}

    main section{padding:56px 0}
    .section-title{font-size:24px;font-weight:800;margin:0 0 10px}
    .section-sub{color:var(--muted);margin:0 0 24px}
    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:18px}
    .card{background:var(--panel);border:1px solid var(--border);border-radius:var(--radius);padding:18px;box-shadow:var(--shadow)}
    .tag{display:inline-block;padding:4px 10px;border:1px solid var(--border);border-radius:999px;font-size:12px;color:var(--muted);background:#fff}

    footer{padding:28px 0;border-top:1px solid var(--border);color:var(--muted);margin-top:40px}
    .footer-row{display:flex;flex-wrap:wrap;justify-content:space-between;gap:12px}

    /* --- Mobile menu --- */
    .nav-desktop{display:block}
    .mobile-toggle{
      display:none; position:relative;
      width:40px; height:40px;
      border:1px solid var(--border); border-radius:10px;
      background:var(--panel); box-shadow:var(--shadow);
      align-items:center; justify-content:center;
    }
    /* Three bars positioned absolutely for reliability */
    .mobile-toggle span{
      position:absolute; left:10px; right:10px; height:2px; background:var(--text);
      transition:transform .2s ease, opacity .2s ease;
    }
    .mobile-toggle span:nth-child(1){ top:12px; }
    .mobile-toggle span:nth-child(2){ top:18px; }
    .mobile-toggle span:nth-child(3){ top:24px; }

    /* burger -> X */
    .mobile-toggle.open span:nth-child(1){ transform:translateY(6px) rotate(45deg); }
    .mobile-toggle.open span:nth-child(2){ opacity:0; }
    .mobile-toggle.open span:nth-child(3){ transform:translateY(-6px) rotate(-45deg); }

    /* Right-side dropdown panel under header */
    .nav-mobile{
      display:none; position:absolute; right:20px; top:64px; /* under header, aligned to button on right */
      background:var(--panel); border:1px solid var(--border); border-radius:12px;
      box-shadow:var(--shadow); min-width:220px;
    }
    .nav-mobile.open{ display:block; }
    .nav-mobile ul{
      list-style:none; margin:0; padding:8px 12px;
      display:flex; flex-direction:column; gap:0; align-items:flex-start;
    }
    .nav-mobile li{ width:100%; }
    .nav-mobile a{ display:block; width:100%; padding:10px 8px; color:var(--text); font-weight:600; border-radius:8px; }
    .nav-mobile a:hover{ background:#f4f2ef; }

    /* --- Responsive tweaks --- */
    @media (max-width:900px){
      .grid{grid-template-columns:1fr 1fr}
      .hero{display:grid;grid-template-columns:1fr;text-align:left}
      .hero img{max-width:260px}
    }
    @media (max-width:768px){
      .container{padding:0 16px}
      .section-title{font-size:22px}
      .nav-desktop{display:none}
      .mobile-toggle{display:inline-flex}
    }
    @media (max-width:480px){
      .hero{padding:36px 0 !important}
      .hero img{max-width:220px}
    }

    /* About page — we'll stack image first in its own layout file */
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <div class="container nav">
      <a class="brand" href="/"><strong>Raksha Balakrishna</strong></a>

      <!-- Desktop nav -->
      <nav class="nav-desktop" aria-label="Primary">
        <ul>
          <li><a href="/">Home</a></li>
          <li><a href="/about/">About</a></li>
          <li><a href="/research/">Research</a></li>
          <li><a href="/teaching/">Teaching</a></li>
          <li><a href="/cv/">CV</a></li>
          <li><a href="/contact/">Contact</a></li>
        </ul>
      </nav>

      <!-- Mobile toggle (3 bars) -->
      <button class="mobile-toggle" aria-expanded="false" aria-controls="mobile-menu" aria-label="Open menu">
        <span></span><span></span><span></span>
      </button>
    </div>

    <!-- Mobile menu (right-side dropdown) -->
    <nav id="mobile-menu" class="nav-mobile" aria-label="Mobile Primary">
      <ul>
        <li><a href="/">Home</a></li>
        <li><a href="/about/">About</a></li>
        <li><a href="/research/">Research</a></li>
        <li><a href="/teaching/">Teaching</a></li>
        <li><a href="/cv/">CV</a></li>
        <li><a href="/contact/">Contact</a></li>
      </ul>
    </nav>
  </header>

  {{ block "main" . }}{{ end }}

  <footer>
    <div class="container footer-row">
      <div>
        <small>© {{ now.Year }} Raksha. All rights reserved.</small>
      </div>
      <div>
        <small>
          <strong>Contact:</strong> <a href="mailto:raksha.balakrishna@gmail.com">raksha.balakrishna@gmail.com</a>
          &nbsp;&nbsp;|&nbsp;&nbsp;
          <strong>Follow:</strong>
          <a href="https://scholar.google.com/citations?user=VfaGOmUAAAAJ&hl=en&oi=ao" target="_blank" rel="noopener">Google Scholar</a> ·
          <a href="https://www.linkedin.com/in/raksha-balakrishna/" target="_blank" rel="noopener">LinkedIn</a>
        </small>
      </div>
    </div>
  </footer>

  <script>
    const btn = document.querySelector('.mobile-toggle');
    const menu = document.getElementById('mobile-menu');
    if (btn && menu) {
      btn.addEventListener('click', () => {
        const isOpen = menu.classList.toggle('open');
        btn.classList.toggle('open', isOpen);
        btn.setAttribute('aria-expanded', isOpen ? 'true' : 'false');
      });
    }
  </script>
</body>
</html>
